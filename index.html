<!doctype html>
<html lang="fr" data-theme="dark">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
    <meta name="theme-color" content="#0f172a" />
    <meta
      name="description"
      content="Application Web et Mobile d'entra√Ænement au code de la route, orient√©e tests et progression personnelle."
    />
    <title>CodeRevision</title>

    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=Lexend:wght@300;400;500;600;700&display=swap"
      rel="stylesheet"
    />
    <link
      href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:wght,FILL@100..700,0..1&display=swap"
      rel="stylesheet"
    />

    <link rel="manifest" href="./manifest.webmanifest" />
    <link rel="icon" href="./assets/branding/app-icon.png" type="image/png" />
    <link rel="apple-touch-icon" href="./assets/branding/app-icon.png" />
    <link rel="stylesheet" href="./styles.css" />
  </head>
  <body>
    <div class="ambient-bg" aria-hidden="true"></div>

    <div class="app-shell">
      <aside class="desktop-sidebar" aria-label="Navigation bureau">
        <div class="sidebar-top">
          <div class="sidebar-brand">
            <img
              src="./assets/branding/logo-noText-nb.png"
              alt="CodeRevision"
              class="sidebar-logo"
              width="44"
              height="44"
            />
            <h1>Code <span>R√©vision</span></h1>
          </div>

          <nav class="sidebar-nav">
            <a href="#/home" class="route-link" data-route-link="home">
              <span class="material-symbols-outlined">dashboard</span>
              <span>R√©viser</span>
            </a>
            <a href="#/tests" class="route-link" data-route-link="tests">
              <span class="material-symbols-outlined">menu_book</span>
              <span>S√©ries</span>
            </a>
            <a href="#/progress" class="route-link" data-route-link="progress">
              <span class="material-symbols-outlined">analytics</span>
              <span>Progr√®s</span>
            </a>
            <a href="#/settings" class="route-link" data-route-link="settings">
              <span class="material-symbols-outlined">settings</span>
              <span>Param√®tres</span>
            </a>
          </nav>
        </div>
      </aside>

      <div class="app-pane">
        <header class="top-header">
          <div class="header-left">
            <img
              src="./assets/branding/logo-noText-nb.png"
              alt="CodeRevision"
              class="header-logo"
              width="44"
              height="44"
            />
            <div>
              <p id="topbar-kicker" class="header-kicker">Session du jour</p>
              <h2 id="topbar-title" class="header-title">Code R√©vision</h2>
            </div>
          </div>

          <button
            id="header-settings-btn"
            class="icon-button"
            type="button"
            aria-label="Param√®tres"
          >
            <span class="material-symbols-outlined">settings</span>
          </button>
        </header>

        <main class="app-main" id="app-main" aria-live="polite">
          <section class="view active" data-view="home">
            <article class="glass-panel home-hero">
              <div class="home-hero-content">
                <p class="hero-label">Premium PWA</p>
                <h3 id="home-greeting">Salut üëã</h3>
                <p id="home-subtitle" class="hero-subtitle">Pr√™t pour ta session du jour ?</p>

                <div class="hero-progress">
                  <div>
                    <p class="metric-title">Progression globale</p>
                    <p id="home-progress-text" class="hero-progress-copy">0% du code compl√©t√©</p>
                    <button id="home-continue-btn" class="btn-primary" type="button">
                      Continuer
                    </button>
                  </div>

                  <div class="progress-ring-wrap" aria-hidden="true">
                    <svg viewBox="0 0 140 140" class="progress-ring-svg">
                      <circle cx="70" cy="70" r="54" class="progress-ring-track"></circle>
                      <circle
                        id="home-ring-fill"
                        cx="70"
                        cy="70"
                        r="54"
                        class="progress-ring-fill"
                      ></circle>
                    </svg>
                    <span id="home-ring-value" class="progress-ring-value">0%</span>
                  </div>
                </div>
              </div>
            </article>

            <section class="stack-section">
              <div class="section-head">
                <h3>Derni√®re activit√©</h3>
              </div>

              <article class="activity-card">
                <div class="activity-icon">
                  <span class="material-symbols-outlined">menu_book</span>
                </div>
                <div class="activity-text">
                  <h4 id="home-activity-main">Aucun module lanc√© pour le moment</h4>
                  <p id="home-activity-sub">Commence un module pour suivre ton rythme.</p>
                </div>
              </article>
            </section>

            <section class="home-stats-grid">
              <article class="glass-mini-stat">
                <span class="material-symbols-outlined">local_fire_department</span>
                <strong id="home-streak">0</strong>
                <p>Jours de suite</p>
              </article>
              <article class="glass-mini-stat">
                <span class="material-symbols-outlined">event</span>
                <strong id="home-last-date">-</strong>
                <p>Derni√®re validation</p>
              </article>
            </section>
          </section>

          <section class="view" data-view="tests">
            <div class="tests-head">
              <h3>Vos S√©ries d'entra√Ænement</h3>
              <p>10 modules disponibles</p>
            </div>

            <label class="search-box" for="tests-search">
              <span class="material-symbols-outlined">search</span>
              <input
                id="tests-search"
                type="search"
                placeholder="Rechercher un module"
                autocomplete="off"
              />
            </label>

            <p id="tests-meta" class="tests-meta"></p>

            <div id="tests-modules" class="modules-list"></div>
          </section>

          <section class="view" data-view="progress">
            <article class="glass-panel progress-banner">
              <div class="progress-banner-head">
                <div>
                  <p class="metric-title">Validations totales</p>
                  <h3 id="progress-score-value">0/10</h3>
                </div>
                <span id="progress-badge" class="progress-pill">En cours</span>
              </div>

              <div class="progress-bar-line">
                <span id="progress-bar-fill"></span>
              </div>

              <p id="progress-message" class="progress-banner-message">
                Continue, tu es sur la bonne voie.
              </p>
            </article>

            <article class="progress-note">
              <span class="material-symbols-outlined">info</span>
              <p>Progression interne (non officielle)</p>
            </article>

            <div class="progress-list-head">
              <h3>√âtat des modules</h3>
              <span id="progress-fraction">0/10</span>
            </div>

            <div id="progress-list" class="progress-list"></div>
          </section>

          <section class="view" data-view="settings">
            <article class="settings-block">
              <h3>Compte</h3>

              <label class="settings-field" for="settings-name-input">
                <span>Pr√©nom</span>
                <input
                  id="settings-name-input"
                  type="text"
                  maxlength="24"
                  placeholder="Ton pr√©nom"
                />
              </label>

              <button id="settings-name-save" class="btn-primary" type="button">Enregistrer</button>
            </article>

            <article class="settings-block">
              <h3>Pr√©f√©rences</h3>

              <label class="toggle-row" for="darkmode-toggle">
                <span>Mode sombre</span>
                <span class="toggle-switch">
                  <input id="darkmode-toggle" type="checkbox" />
                  <span class="toggle-slider"></span>
                </span>
              </label>
            </article>

            <article class="settings-block danger">
              <h3>Syst√®me</h3>
              <button id="reset-progress-btn" class="btn-danger" type="button">
                R√©initialiser ma progression
              </button>
            </article>
          </section>
        </main>
      </div>
    </div>

    <nav class="bottom-nav" aria-label="Navigation principale">
      <a href="#/home" class="route-link" data-route-link="home">
        <span class="material-symbols-outlined">school</span>
        <span>R√©viser</span>
      </a>
      <a href="#/tests" class="route-link" data-route-link="tests">
        <span class="material-symbols-outlined">layers</span>
        <span>S√©ries</span>
      </a>
      <a href="#/progress" class="route-link" data-route-link="progress">
        <span class="material-symbols-outlined">analytics</span>
        <span>Progr√®s</span>
      </a>
      <a href="#/settings" class="route-link" data-route-link="settings">
        <span class="material-symbols-outlined">settings</span>
        <span>Param√®tres</span>
      </a>
    </nav>

    <div
      id="name-modal"
      class="overlay hidden"
      role="dialog"
      aria-modal="true"
      aria-labelledby="name-modal-title"
    >
      <div class="overlay-card welcome-card">
        <p class="overlay-kicker">Bienvenue</p>
        <h3 id="name-modal-title">Comment t'appelles-tu ?</h3>
        <p class="overlay-sub">Ton pr√©nom sera utilis√© pour personnaliser tes encouragements.</p>
        <input id="name-input" type="text" maxlength="24" placeholder="Entre ton pr√©nom" />
        <button id="name-save-btn" class="btn-primary" type="button">Commencer</button>
      </div>
    </div>

    <div
      id="pretest-modal"
      class="overlay hidden"
      role="dialog"
      aria-modal="true"
      aria-labelledby="pretest-title"
    >
      <div class="overlay-card pretest-flow-card">
        <p class="overlay-kicker">Avant de commencer</p>
        <h3 id="pretest-title">Rappel express</h3>
        <p id="pretest-module-name" class="overlay-sub"></p>

        <div class="pretest-stage">
          <p id="pretest-step-index" class="pretest-step-index"></p>
          <div id="pretest-step-card" class="pretest-step-card"></div>
          <div id="pretest-dots" class="pretest-dots" aria-hidden="true"></div>
        </div>

        <div class="overlay-actions">
          <button id="pretest-cancel-btn" class="btn-secondary" type="button">Plus tard</button>
          <button id="pretest-next-btn" class="btn-primary" type="button">Suivant</button>
        </div>
      </div>
    </div>

    <div
      id="mascot-modal"
      class="overlay hidden"
      role="dialog"
      aria-modal="true"
      aria-labelledby="mascot-title"
    >
      <div class="overlay-card mascot-card">
        <img
          src="./assets/mascot/coach.svg"
          alt="Mascotte"
          class="mascot-image"
          width="96"
          height="96"
        />
        <p class="overlay-kicker">Validation</p>
        <h3 id="mascot-title">Coach R√©vision</h3>
        <p id="mascot-module-name" class="overlay-sub"></p>

        <div id="mascot-question" class="speech-bubble"></div>

        <div id="mascot-actions" class="binary-actions">
          <button type="button" data-answer="yes" class="btn-secondary">Oui</button>
          <button type="button" data-answer="no" class="btn-secondary">Non</button>
        </div>

        <p id="mascot-feedback" class="mascot-feedback" aria-live="polite"></p>
        <button id="mascot-close-btn" class="btn-primary hidden" type="button">Continuer</button>
      </div>
    </div>

    <section id="test-screen" class="test-screen hidden" aria-hidden="true">
      <div class="test-safe-top"></div>
      <header class="test-topbar">
        <button id="test-back-btn" class="test-back" type="button">
          <span class="material-symbols-outlined">chevron_left</span>
          Retour
        </button>

        <div class="test-title-wrap">
          <p>Session en cours</p>
          <h3 id="test-module-title">Module</h3>
        </div>

        <button id="test-refresh-btn" class="icon-button" type="button" aria-label="Actualiser">
          <span class="material-symbols-outlined">refresh</span>
        </button>
      </header>

      <div class="test-progress-track">
        <span id="test-progress-fill"></span>
      </div>

      <div class="test-frame-wrap">
        <iframe
          id="test-frame"
          title="Session d'entra√Ænement"
          loading="eager"
          allow="fullscreen"
          referrerpolicy="strict-origin-when-cross-origin"
        ></iframe>
      </div>
    </section>

    <div id="toast" class="toast hidden" role="status" aria-live="polite"></div>

    <script type="module" src="./app.js"></script>
  </body>
</html>
